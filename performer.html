<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performer Service - GISUGO</title>
    <link rel="stylesheet" href="public/css/listing.css?v=20260209a">
      <link rel="stylesheet" href="public/css/shared-menu.css">
  </head>
  <body>
    <div class="jobcat-header">
      <div class="jobcat-listheader">
        <div class="jobcat-servicemenu" id="jobcatServiceMenuBtn">
          <div class="jobcat-servicename">
            <div>Performer Gigs</div>
            <div>&#9660;</div>
          </div>
        </div>
                <!-- âœ… SHARED CATEGORY MODAL: Generated dynamically by listing.js -->
        <!-- Update once in listing.js, applies to all 51 category pages -->
        <div class="jobcat-servicemenu-overlay" id="jobcatServiceMenuOverlay">
          <ul>
            <!-- Categories will be replaced by listing.js with modal structure -->
          </ul>
        </div>

        <!-- Region Picker Modal (Original Design) -->
        <div class="region-picker-overlay" id="regionPickerOverlay">
          <div class="region-picker-modal">
            <button class="region-picker-close" id="regionPickerCloseBtn">&times;</button>
            <div class="region-picker-title">Select Region</div>
            <div class="region-picker-list" id="regionPickerList">
              <!-- Region items will be populated by JavaScript -->
            </div>
          </div>
        </div>

        <!-- City Picker Modal (Original Design) -->
        <div class="city-picker-overlay" id="cityPickerOverlay">
          <div class="city-picker-modal">
            <button class="city-picker-close" id="cityPickerCloseBtn">&times;</button>
            <div class="city-picker-title">Select City</div>
            <div class="city-picker-list" id="cityPickerList">
              <!-- City items will be populated by JavaScript -->
            </div>
          </div>
        </div>

        <div class="jobcat-headerbuttons">
          <div class="jobcat-headerbutton" id="postBtn" onclick="handlePostButtonClick(event); return false;">
            <img src="public/images/Post.png" alt="Post" class="jobcat-icon">
            <div class="posttext">Post</div>
          </div>
          <div class="jobcat-headerbutton" id="searchBtn">
            <img src="public/images/search.png" alt="Search" class="jobcat-icon">
            <div>Search</div>
          </div>
          <div class="jobcat-headerbutton jobcat-menu-btn">
            <img src="public/images/menu.png" alt="Menu" class="jobcat-icon">
            <div>Menu</div>
          </div>
        </div>
      </div>
      <div class="jobcat-borderline"></div>
      <!-- Search bar will be dynamically inserted here by listing.js -->
    </div>

    <!-- Sort Header -->
    <div class="jobcat-sort-header">
      <div class="sortmenus">
        <!-- ?? Gaming Filter Panel (Expandable) -->
        <div class="gaming-filter-panel" id="gamingFilterPanel">
          <div class="filter-panel-header">
            <div class="filter-panel-title">FILTER Gigs</div>
          </div>
          <div class="filter-panel-body">
            <!-- REGION Dropdown -->
            <!-- REGION Button (opens modal) -->
            <div class="filter-section">
              <div class="filter-section-title">REGION</div>
              <button class="filter-button" id="regionButton">Cebu</button>
          </div>
            
            <!-- CITY Button (opens modal) -->
            <div class="filter-section">
              <div class="filter-section-title">CITY</div>
              <button class="filter-button" id="cityButton">CEBU CITY</button>
        </div>
            
            <!-- PAY TYPE Icon Selection -->
            <div class="filter-section">
              <div class="filter-section-title">PAY TYPE</div>
              <div class="pay-type-selector">
                <div class="pay-type-option" data-value="per-job" id="payOptionJob">
                  <div class="pay-type-icon">??</div>
                  <div class="pay-type-label">Per Job</div>
                </div>
                <div class="pay-type-option" data-value="per-hour" id="payOptionHour">
                  <div class="pay-type-icon">?</div>
                  <div class="pay-type-label">Per Hour</div>
                </div>
              </div>
          </div>
          </div>
          <!-- Filter Display Bar (visible when collapsed) -->
          <div class="filter-panel-footer-bar" id="gamingFilterBar">
            <div class="filter-display-text" id="filterDisplay">
              <div class="filter-display-item">
                <div class="filter-display-label">Region</div>
                <div class="filter-display-value" id="filterDisplayRegion">Cebu</div>
              </div>
              <div class="filter-display-item">
                <div class="filter-display-label">City</div>
                <div class="filter-display-value" id="filterDisplayCity">CEBU CITY</div>
              </div>
              <div class="filter-display-item">
                <div class="filter-display-label">Pay Rate</div>
                <div class="filter-display-value" id="filterDisplayPay">SELECT</div>
              </div>
            </div>
            <div class="filter-display-arrow" id="filterArrow"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="jobcat-header-spacer"></div>

    <div class="jobcat-menu-overlay" id="jobcatMenuOverlay">
      <div class="jobcat-menu-items">
        <!-- Menu items dynamically generated by shared-menu.js?v=3.0 -->
      </div>
    </div>

    <!-- New job postings will appear here dynamically -->

    <!-- Region Picker Modal -->
    <div class="region-picker-overlay" id="regionPickerOverlay">
      <div class="region-picker-modal">
        <button class="region-picker-close" id="regionPickerCloseBtn">&times;</button>
        <div class="region-picker-title">Select Region</div>
        <div class="region-picker-list" id="regionPickerList">
          <!-- Region items will be populated by JavaScript -->
        </div>
      </div>
    </div>

    <!-- City Picker Modal -->
    <div class="city-picker-overlay" id="cityPickerOverlay">
      <div class="city-picker-modal">
        <button class="city-picker-close" id="cityPickerCloseBtn">&times;</button>
        <div class="city-picker-title">Select City</div>
        <div class="city-picker-list" id="cityPickerList">
          <!-- City items will be populated by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Pay Picker Modal -->
    <div class="pay-picker-overlay" id="payPickerOverlay">
      <div class="pay-picker-modal">
        <button class="pay-picker-close" id="payPickerCloseBtn">&times;</button>
        <div class="pay-picker-title">Select Pay Type</div>
        <div class="pay-picker-list" id="payPickerList">
          <!-- Pay type items will be populated by JavaScript -->
        </div>
      </div>
    </div>

    <!-- CRITICAL: Auth check function MUST load before Firebase for Edge -->
    <script>
      // POST BUTTON AUTH CHECK (with zombie user detection)
      function handlePostButtonClick(e) {
        e.preventDefault();
        e.stopPropagation();
        
        // Wait for Firebase to be available
        setTimeout(function() {
          if (typeof firebase === 'undefined' || !firebase.auth) {
            window.location.href = 'login.html';
            return;
          }
          
          const auth = firebase.auth();
          const currentUser = auth.currentUser;
          
          if (!currentUser) {
            window.location.href = 'login.html';
            return;
          }
          
          // Check if user has profile in Firestore (prevent zombie users)
          if (typeof checkUserHasProfile === 'function') {
            checkUserHasProfile(currentUser.uid).then(function(result) {
              if (result.hasProfile) {
                window.location.href = 'new-post2.html';
              } else {
                // Zombie user - redirect to complete profile
                window.location.href = 'sign-up.html';
              }
            }).catch(function(error) {
              console.error('Profile check failed:', error);
              window.location.href = 'login.html';
            });
          } else {
            // Fallback: no profile check available
            window.location.href = 'new-post2.html';
          }
        }, 50);
        
        return false;
      }
    </script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>
    
    <!-- Firebase Helper Modules -->
    <script src="public/js/firebase-config.js"></script>
    <script src="public/js/firebase-auth.js"></script>
    <script src="public/js/firebase-db.js?v=2.1"></script>
    <script src="public/js/firebase-storage.js"></script>
    
    <!-- Viewport Debug Tool -->
    <!-- Loading Modal -->
    <div id="loadingOverlay" class="loading-overlay">
      <div class="loading-spinner"></div>
      <div class="loading-text">Loading gigs...</div>
    </div>

    <script src="public/js/app-config.js?v=1.0"></script>
    <script src="public/js/shared-menu.js?v=3.1"></script>
    <script src="public/js/listing.js?v=20260208u"></script>
    
    <script>
      // Job Category Modal Close Button Handler
      const jobcatModalClose = document.getElementById('jobcatModalClose');
      const jobcatOverlay = document.getElementById('jobcatServiceMenuOverlay');
      
      if (jobcatModalClose && jobcatOverlay) {
        // Close modal when clicking X button
        jobcatModalClose.addEventListener('click', () => {
          jobcatOverlay.classList.remove('show');
        });
        
        // Close modal when clicking outside the modal container
        jobcatOverlay.addEventListener('click', (e) => {
          if (e.target === jobcatOverlay) {
            jobcatOverlay.classList.remove('show');
          }
        });
      }
    </script>


  </body>
</html> 
