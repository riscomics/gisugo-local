<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="GISUGO - A marketplace for searching and posting jobs in your local neighborhood">
    <meta name="keywords" content="local service, gig economy, marketplace, jobs, services">
    <title>GISUGO - Local Service Marketplace</title>
    <link rel="stylesheet" href="/gisugo-local/public/css/home.css?v=4.8">
    <!-- Add favicon -->
    <link rel="icon" type="image/png" href="/gisugo-local/public/images/favicon.png">
    <style>
      /* Loading Animation for Menu */
      .menu-loading {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        color: rgba(255, 255, 255, 0.7);
        font-size: 14px;
      }
      
      .menu-loading-spinner {
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-top-color: #fff;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
        margin-right: 10px;
      }
      
      @keyframes spin {
        to { transform: rotate(360deg); }
      }
      
      /* Logout Loading Overlay */
      .logout-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 99999;
        flex-direction: column;
      }
      
      .logout-overlay.active {
        display: flex;
      }
      
      .logout-spinner {
        width: 60px;
        height: 60px;
        border: 5px solid rgba(255, 255, 255, 0.3);
        border-top-color: #fff;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 20px;
      }
      
      .logout-message {
        color: #fff;
        font-size: 18px;
        font-weight: 500;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <div class="header-wrapper">
      <header class="header">
        <div class="header__logo-wrapper">
        <img src="/gisugo-local/public/images/Gisugo-emblem.png" alt="GISUGO Logo - Person with shopping bag" class="header__logo">
        </div>
        <div class="header__title-group">
          <h1 class="header__title">GISUGO</h1>
          <p class="header__subtitle">Local Service Marketplace</p>
        </div>
        <button class="header__menu" aria-label="Menu">
          <span class="header__menu-emoji">üìã</span>
          <span class="header__menu-caption">Menu</span>
        </button>
        
        <!-- Menu Overlay -->
        <nav class="menu-overlay">
          <ul class="menu-list" id="homeMenuList">
            <!-- Loading state (shown initially until Firebase confirms auth state) -->
            <li class="menu-loading">
              <div class="menu-loading-spinner"></div>
              <span>Loading...</span>
            </li>
          </ul>
        </nav>
      </header>
      <div class="accent-line1"></div>
    </div>

    <div class="header-spacer"></div>

    <!-- Logout Loading Overlay -->
    <div class="logout-overlay" id="logoutOverlay">
      <div class="logout-spinner"></div>
      <div class="logout-message">Logging out...</div>
    </div>

    <!-- Video Section with Custom Thumbnail -->
    <section class="video-container">
      <div class="video-wrapper">
        <!-- Custom Thumbnail Overlay -->
        <div class="video-thumbnail-overlay" onclick="playVideo()">
          <img src="/gisugo-local/public/images/GISUGO-BANNER-horizontal.jpg" alt="Play GISUGO Video" class="custom-thumbnail">
          <div class="play-button">‚ñ∂</div>
        </div>
        
        <!-- YouTube iframe (loaded on click) -->
        <iframe 
          id="youtube-player"
          width="560" 
          height="315" 
          src=""
          title="How to use GISUGO" 
          frameborder="0" 
          style="display: none;"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
          allowfullscreen>
        </iframe>
      </div>
    </section>

    <!-- Accent Line -->
    <div class="accent-line2"></div>

    <!-- Basic Helper Section -->
    <section>
      <h2 class="category-header tier-basic">BASIC HELPER</h2>
      <div class="service-grid">
        <a href="hatod.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Hatod.png" alt="Delivery Service" class="service-card__image">
          </div>
          <h3 class="service-card__title">HATOD</h3>
        </a>
        <a href="hakot.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Hakot.png" alt="Moving Help" class="service-card__image">
          </div>
          <h3 class="service-card__title">HAKOT</h3>
        </a>
        <a href="kompra.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Kompra.png" alt="Shopping Service" class="service-card__image">
          </div>
          <h3 class="service-card__title">KOMPRA</h3>
        </a>
        <a href="luto.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Luto.png" alt="Cooking Service" class="service-card__image">
          </div>
          <h3 class="service-card__title">LUTO</h3>
        </a>
        <a href="hugas.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Hugas.png" alt="Dishwashing Service" class="service-card__image">
          </div>
          <h3 class="service-card__title">HUGAS</h3>
        </a>
        <a href="laba.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Laba.png" alt="Laundry Service" class="service-card__image">
          </div>
          <h3 class="service-card__title">LABA</h3>
        </a>
        <a href="limpyo.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Limpyo.png" alt="Cleaning Service" class="service-card__image">
          </div>
          <h3 class="service-card__title">LIMPYO</h3>
        </a>
        <a href="tindera.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Tindera.png" alt="Vendor Service" class="service-card__image">
          </div>
          <h3 class="service-card__title">TINDERA</h3>
        </a>
        <a href="bantay.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Bantay.png" alt="Attending Service" class="service-card__image">
          </div>
          <h3 class="service-card__title">BANTAY</h3>
        </a>
        <a href="trainer.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Trainer.png" alt="Trainer" class="service-card__image">
          </div>
          <h3 class="service-card__title">TRAINER</h3>
        </a>
        <a href="staff.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Staff.png" alt="Staff" class="service-card__image">
          </div>
          <h3 class="service-card__title">STAFF</h3>
        </a>
        <a href="reception.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/reception.png" alt="Reception" class="service-card__image">
          </div>
          <h3 class="service-card__title">RECEPTION</h3>
        </a>
      </div>
    </section>

    <!-- Skilled Worker Section -->
    <section>
      <h2 class="category-header tier-skilled">SKILLED WORKER</h2>
      <div class="service-grid">
        <a href="driver.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Driver.png" alt="Driver" class="service-card__image">
          </div>
          <h3 class="service-card__title">DRIVER</h3>
        </a>
        <a href="security.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Security.png" alt="Security" class="service-card__image">
          </div>
          <h3 class="service-card__title">SECURITY</h3>
        </a>
        <a href="plumber.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Plumber.png" alt="Plumber" class="service-card__image">
          </div>
          <h3 class="service-card__title">PLUMBER</h3>
        </a>
        <a href="builder.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/builder.png" alt="Builder" class="service-card__image">
          </div>
          <h3 class="service-card__title">BUILDER</h3>
        </a>
        <a href="painter.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Painter.png" alt="Painter" class="service-card__image">
          </div>
          <h3 class="service-card__title">PAINTER</h3>
        </a>
        <a href="carpenter.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Carpenter.png" alt="Carpenter" class="service-card__image">
          </div>
          <h3 class="service-card__title">CARPENTER</h3>
        </a>
        <a href="creative.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Creative.png" alt="Creative" class="service-card__image">
          </div>
          <h3 class="service-card__title">CREATIVE</h3>
        </a>
        <a href="editor.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Editor.png" alt="Editor" class="service-card__image">
          </div>
          <h3 class="service-card__title">EDITOR</h3>
        </a>
        <a href="artist.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Graphic-artist.png" alt="Artist" class="service-card__image">
          </div>
          <h3 class="service-card__title">ARTIST</h3>
        </a>
        <a href="petcare.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Pet Care.png" alt="Pet Care" class="service-card__image">
          </div>
          <h3 class="service-card__title">PET CARE</h3>
        </a>
        <a href="researcher.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Researcher.png" alt="Researcher" class="service-card__image">
          </div>
          <h3 class="service-card__title">RESEARCHER</h3>
        </a>
        <a href="social.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Social.png" alt="Social" class="service-card__image">
          </div>
          <h3 class="service-card__title">SOCIAL</h3>
        </a>
        <a href="photographer.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Photographer.png" alt="Photographer" class="service-card__image">
          </div>
          <h3 class="service-card__title">PHOTOGRAPHER</h3>
        </a>
        <a href="videographer.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Videographer.png" alt="Videographer" class="service-card__image">
          </div>
          <h3 class="service-card__title">VIDEOGRAPHER</h3>
        </a>
        <a href="musician.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Musician.png" alt="Musician" class="service-card__image">
          </div>
          <h3 class="service-card__title">MUSICIAN</h3>
        </a>
        <a href="secretary.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Secretary.png" alt="Secretary" class="service-card__image">
          </div>
          <h3 class="service-card__title">SECRETARY</h3>
        </a>
        <a href="tutor.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Tutor.png" alt="Tutor" class="service-card__image">
          </div>
          <h3 class="service-card__title">TUTOR</h3>
        </a>
        <a href="clerical.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/clerical.png" alt="Clerical" class="service-card__image">
          </div>
          <h3 class="service-card__title">CLERICAL</h3>
        </a>
      </div>
    </section>

    <!-- Professional Section -->
    <section>
      <h2 class="category-header tier-professional">PROFESSIONAL</h2>
      <div class="service-grid">
        <a href="nurse.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Nurse.png" alt="Nurse" class="service-card__image">
          </div>
          <h3 class="service-card__title">NURSE</h3>
        </a>
        <a href="doctor.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Doctor.png" alt="Doctor" class="service-card__image">
          </div>
          <h3 class="service-card__title">DOCTOR</h3>
        </a>
        <a href="lawyer.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Lawyer.png" alt="Lawyer" class="service-card__image">
          </div>
          <h3 class="service-card__title">LAWYER</h3>
        </a>
        <a href="mechanic.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Mechanic.png" alt="Mechanic" class="service-card__image">
          </div>
          <h3 class="service-card__title">MECHANIC</h3>
        </a>
        <a href="electrician.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Electrician.png" alt="Electrician" class="service-card__image">
          </div>
          <h3 class="service-card__title">ELECTRICIAN</h3>
        </a>
        <a href="tailor.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Tailor.png" alt="Tailor" class="service-card__image">
          </div>
          <h3 class="service-card__title">TAILOR</h3>
        </a>
        <a href="accountant.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Accountant.png" alt="Accountant" class="service-card__image">
          </div>
          <h3 class="service-card__title">ACCOUNTANT</h3>
        </a>
        <a href="consultant.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Consultant.png" alt="Consultant" class="service-card__image">
          </div>
          <h3 class="service-card__title">CONSULTANT</h3>
        </a>
        <a href="engineer.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Engineer.png" alt="Engineer" class="service-card__image">
          </div>
          <h3 class="service-card__title">ENGINEER</h3>
        </a>
        <a href="programmer.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Programmer.png" alt="Programmer" class="service-card__image">
          </div>
          <h3 class="service-card__title">PROGRAMMER</h3>
        </a>
        <a href="therapist.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Therapist.png" alt="Therapist" class="service-card__image">
          </div>
          <h3 class="service-card__title">THERAPIST</h3>
        </a>
        <a href="marketer.html" class="service-card">
          <div class="service-card__image-container">
            <img src="/gisugo-local/public/images/Marketer.png" alt="Marketer" class="service-card__image">
          </div>
          <h3 class="service-card__title">MARKETER</h3>
        </a>
      </div>
    </section> 

    <!-- Footer -->
    <footer class="footer">
      <p><a href="https://gisugo.com">GISUGO.com</a> is &copy; Copyright Designed by Real Interface Studios LLC</p>
    </footer>
    
    <!-- Firebase SDK (Compat version for easier integration) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>
    
    <!-- Firebase Helper Modules -->
    <script src="public/js/firebase-config.js"></script>
    <script src="public/js/firebase-auth.js"></script>
    <script src="public/js/firebase-db.js"></script>
    <script src="public/js/firebase-storage.js"></script>
    
    <script src="public/js/menu.js"></script>
    
    <!-- Video Player Script -->
    <script>
      function playVideo() {
        const overlay = document.querySelector('.video-thumbnail-overlay');
        const iframe = document.getElementById('youtube-player');
        
        // Hide the custom thumbnail overlay
        overlay.style.display = 'none';
        
        // Load YouTube video with autoplay and show iframe
        iframe.src = 'https://www.youtube.com/embed/ptHyvEeevR8?autoplay=1&loop=1&playlist=ptHyvEeevR8&rel=0&modestbranding=1';
        iframe.style.display = 'block';
      }
      
      // Update menu visibility based on login status
      document.addEventListener('DOMContentLoaded', function() {
        // ‚úÖ PROPER FIX: Don't check auth before Firebase is ready
        // Wait for onAuthStateChanged to fire (when Firebase confirms auth state)
        
        if (typeof firebase !== 'undefined' && firebase.auth) {
          firebase.auth().onAuthStateChanged(async function(user) {
            console.log('üîê Firebase auth state confirmed:', user ? 'Logged in' : 'Logged out');
            
            if (user) {
              // Check if user has completed profile - if not, redirect to signup
              if (typeof checkUserHasProfile === 'function') {
                const { hasProfile } = await checkUserHasProfile(user.uid);
                if (!hasProfile) {
                  console.log('‚ö†Ô∏è Zombie user detected - redirecting to complete profile');
                  window.location.href = 'sign-up.html';
                  return;
                }
              }
            }
            
            // Now update menu with confirmed auth state
            updateHomeMenu();
          });
        } else {
          // Firebase not available - show logged out state
          console.warn('‚ö†Ô∏è Firebase not available');
          updateHomeMenu();
        }
      });
      
      function updateHomeMenu() {
        const menuList = document.getElementById('homeMenuList');
        
        if (!menuList) return;
        
        // Check auth state (safe to check now - only called from onAuthStateChanged)
        const currentUser = (typeof firebase !== 'undefined' && firebase.auth) 
          ? firebase.auth().currentUser 
          : null;
        const userLoggedIn = currentUser !== null;
        
        console.log('üìã Updating home menu - User logged in:', userLoggedIn);
        
        // Build menu HTML
        let menuHTML = '';
        
        if (userLoggedIn) {
          // Logged in - show all menu items + logout
          menuHTML = `
            <li class="auth-required"><a href="new-post2.html">NEW POST</a></li>
            <li class="auth-required"><a href="profile.html">ACCOUNT</a></li>
            <li class="auth-required"><a href="messages.html">MESSAGES</a></li>
            <li class="auth-required"><a href="landing.html">FAVORITES</a></li>
            <li class="auth-required"><a href="jobs.html">GIGS MANAGER</a></li>
            <li class="auth-required"><a href="clear-storage.html">CLEAR DATA</a></li>
            <li class="public-item"><a href="forum.html">COMMUNITY FORUM</a></li>
            <li class="public-item"><a href="contacts.html">CONTACT</a></li>
            <li class="public-item"><a href="#" onclick="handleLogout(); return false;">LOGOUT</a></li>
          `;
        } else {
          // Logged out - show public items + login
          menuHTML = `
            <li class="public-item"><a href="forum.html">COMMUNITY FORUM</a></li>
            <li class="public-item"><a href="contacts.html">CONTACT</a></li>
            <li class="public-item"><a href="login.html">LOGIN / SIGN UP</a></li>
          `;
        }
        
        // Update menu
        menuList.innerHTML = menuHTML;
      }
      
      async function handleLogout() {
        console.log('üö™ Logging out...');
        
        // Show loading overlay
        const overlay = document.getElementById('logoutOverlay');
        if (overlay) {
          overlay.classList.add('active');
        }
        
        // Perform logout
        if (typeof logout === 'function') {
          await logout();
          // Redirect to home (reload to clear state)
          window.location.href = 'index.html';
        } else {
          // Fallback if logout function not available
          localStorage.removeItem('gisugo_current_user');
          window.location.href = 'index.html';
        }
      }
    </script>

    
  </body>
</html>  
