<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messages - GISUGO</title>
    <!-- UNIFORM HEADER SYSTEM -->
    <link rel="stylesheet" href="public/css/header-uniform.css?v=2.1">
    <link rel="stylesheet" href="public/css/messages.css?v=11.0">
</head>
<body class="page-messages">
    <!-- UNIFORM HEADER SYSTEM -->
    <div class="uniform-header">
        <div class="uniform-header-title-container">
            <button class="uniform-header-btn back" aria-label="Back">
                <img src="public/icons/back.png" alt="Back">
                <span>Back</span>
            </button>
            <div class="uniform-header-title"></div>
            <button class="uniform-header-btn menu" id="uniformMenuBtn" aria-label="Menu">
                <img src="public/icons/menu.png" alt="Menu">
                <div>Menu</div>
            </button>
        </div>
        <div class="uniform-header-borderline"></div>
    </div>

    <!-- UNIFORM MENU OVERLAY -->
    <div class="uniform-menu-overlay" id="uniformMenuOverlay">
        <div class="uniform-menu-items">
            <!-- Menu items dynamically generated by shared-menu.js -->
        </div>
    </div>

    <!-- Role Tab Navigation - New Top Level -->
    <div class="role-tabs">
        <button class="role-tab-btn active" data-role="worker" id="workerRoleTab">
            <span class="role-tab-text">WORKER</span>
        </button>
        <button class="role-tab-btn" data-role="customer" id="customerRoleTab">
            <span class="role-tab-text">CUSTOMER</span>
        </button>
    </div>

    <!-- Customer Tab Navigation -->
    <div class="messages-tabs customer-tabs" style="display: none;">
        <button class="tab-btn active" data-tab="customer-alerts" id="customerAlertsTab">
            <span class="tab-label">ALERTS</span>
            <span class="notification-count">7</span>
        </button>
        <button class="tab-btn" data-tab="customer-interviews" id="customerInterviewsTab">
            <span class="tab-label">INTERVIEWS</span>
            <span class="notification-count">2</span>
        </button>
        <button class="tab-btn" data-tab="customer-messages" id="customerMessagesTab">
            <span class="tab-label">MESSAGES</span>
            <span class="notification-count">6</span>
        </button>
    </div>

    <!-- Worker Tab Navigation -->
    <div class="messages-tabs worker-tabs">
        <button class="tab-btn active" data-tab="worker-alerts" id="workerAlertsTab">
            <span class="tab-label">ALERTS</span>
            <span class="notification-count">1</span>
        </button>
        <button class="tab-btn" data-tab="worker-chats" id="workerChatsTab">
            <span class="tab-label">CHATS</span>
            <span class="notification-count">1</span>
        </button>
        <button class="tab-btn" data-tab="worker-messages" id="workerMessagesTab">
            <span class="tab-label">MESSAGES</span>
            <span class="notification-count">6</span>
        </button>
    </div>

    <!-- Independent Tab Content Areas -->
    
    <!-- CUSTOMER ROLE CONTENT AREAS -->
    <!-- Customer Alerts Tab Content -->
    <div class="tab-content-wrapper customer-content" id="customer-alerts-content" style="display: none;">
        <div class="tab-scroll-container">
            <div class="notifications-container">
                <!-- Customer alerts content will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Customer Interviews Tab Content -->
    <div class="tab-content-wrapper customer-content" id="customer-interviews-content" style="display: none;">
        <div class="tab-scroll-container">
            <div class="messages-container">
                <!-- Customer interview chats content will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Customer Messages Tab Content -->
    <div class="tab-content-wrapper customer-content" id="customer-messages-content" style="display: none;">
        <div class="tab-scroll-container">
            <div class="applications-container">
                <!-- Customer admin messages UI -->
                <div class="user-messages-layout">
                    <!-- Left Panel: User Message Inbox -->
                    <div class="user-messages-left-panel">
                        <div class="panel-header">
                            <div class="inbox-controls">
                                <div class="inbox-tabs">
                                    <button class="inbox-tab-btn active" id="customerNewInboxBtn" data-inbox="new">
                                        New <span class="tab-count" id="customerNewCount">3</span>
                                    </button>
                                    <button class="inbox-tab-btn" id="customerOldInboxBtn" data-inbox="old">
                                        Old Messages
                                    </button>
                                </div>
                                <div class="inbox-search">
                                    <select class="type-dropdown" id="customerMessageTypeFilter">
                                        <option value="all">All Messages</option>
                                        <option value="support">Support Responses</option>
                                        <option value="system">System Updates</option>
                                        <option value="notifications">Important Notices</option>
                                        <option value="updates">Platform Updates</option>
                                        <option value="promotions">Promotions</option>
                                    </select>
                                    <input type="text" placeholder="Search messages..." class="search-input-small" id="customerMessagesSearchInput">
                                    <button class="search-btn-small" id="customerMessagesSearchBtn">üîç</button>
                                </div>
                            </div>
                        </div>

                        <!-- Scrollable Messages Container -->
                        <div class="user-messages-list-container">
                            <!-- User Messages List -->
                            <div class="user-messages-list" id="customerMessagesList">
                                <!-- Coming Soon Placeholder for now -->
                                <div class="messages-placeholder">
                                    <div class="placeholder-icon">üìß</div>
                                    <h3>Messages from GISUGO</h3>
                                    <p>Customer admin communications and system notifications will appear here</p>
                                    <small>This feature is coming soon</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Panel: Message Detail & Reply -->
                    <div class="user-messages-right-panel">
                        <div class="user-message-detail" id="customerMessageDetail">
                            <div class="no-message-selected">
                                <div class="no-message-icon">üí¨</div>
                                <h4>Select a message to view details</h4>
                                <p>Choose a message from the left to read and respond</p>
                            </div>
                        </div>

                        <!-- Message Detail Content (hidden initially) -->
                        <div class="user-message-content" id="customerMessageContent" style="display: none;">
                            <!-- Content will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Message Detail Overlay (for mobile screens) -->
                <div id="customerMessageDetailOverlay" class="user-message-detail-overlay" style="display: none;">
                    <div class="overlay-content">
                        <div class="overlay-header">
                            <button class="overlay-close-btn" id="customerOverlayCloseBtn">‚úï</button>
                            <h3>Message Details</h3>
                        </div>
                        <div class="overlay-body">
                            <!-- Content will be populated by JavaScript -->
                        </div>
                        <div class="overlay-footer">
                            <button class="user-detail-reply-btn" id="customerOverlayReplyBtn">Reply</button>
                            <button class="user-detail-close-btn" id="customerOverlayMarkReadBtn">Mark as Read</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- WORKER ROLE CONTENT AREAS -->
    <!-- Worker Alerts Tab Content -->
    <div class="tab-content-wrapper worker-content active" id="worker-alerts-content">
        <div class="tab-scroll-container">
            <div class="notifications-container">
                <!-- Worker alerts content will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Worker Chats Tab Content -->
    <div class="tab-content-wrapper worker-content" id="worker-chats-content" style="display: none;">
        <div class="tab-scroll-container">
            <div class="messages-container">
                <!-- Worker chats content will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Worker Messages Tab Content -->
    <div class="tab-content-wrapper worker-content" id="worker-messages-content" style="display: none;">
        <div class="tab-scroll-container">
            <div class="applications-container">
                <!-- Worker admin messages UI -->
                <div class="user-messages-layout">
                    <!-- Left Panel: User Message Inbox -->
                    <div class="user-messages-left-panel">
                        <div class="panel-header">
                            <div class="inbox-controls">
                                <div class="inbox-tabs">
                                    <button class="inbox-tab-btn active" id="workerNewInboxBtn" data-inbox="new">
                                        New <span class="tab-count" id="workerNewCount">3</span>
                                    </button>
                                    <button class="inbox-tab-btn" id="workerOldInboxBtn" data-inbox="old">
                                        Old Messages
                                    </button>
                                </div>
                                <div class="inbox-search">
                                    <select class="type-dropdown" id="workerMessageTypeFilter">
                                        <option value="all">All Messages</option>
                                        <option value="support">Support Responses</option>
                                        <option value="system">System Updates</option>
                                        <option value="notifications">Important Notices</option>
                                        <option value="updates">Platform Updates</option>
                                        <option value="promotions">Promotions</option>
                                    </select>
                                    <input type="text" placeholder="Search messages..." class="search-input-small" id="workerMessagesSearchInput">
                                    <button class="search-btn-small" id="workerMessagesSearchBtn">üîç</button>
                                </div>
                            </div>
                        </div>

                        <!-- Scrollable Messages Container -->
                        <div class="user-messages-list-container">
                            <!-- User Messages List -->
                            <div class="user-messages-list" id="workerMessagesList">
                                <!-- Coming Soon Placeholder for now -->
                                <div class="messages-placeholder">
                                    <div class="placeholder-icon">üìß</div>
                                    <h3>Messages from GISUGO</h3>
                                    <p>Worker admin communications and system notifications will appear here</p>
                                    <small>This feature is coming soon</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Panel: Message Detail & Reply -->
                    <div class="user-messages-right-panel">
                        <div class="user-message-detail" id="workerMessageDetail">
                            <div class="no-message-selected">
                                <div class="no-message-icon">üí¨</div>
                                <h4>Select a message to view details</h4>
                                <p>Choose a message from the left to read and respond</p>
                            </div>
                        </div>

                        <!-- Message Detail Content (hidden initially) -->
                        <div class="user-message-content" id="workerMessageContent" style="display: none;">
                            <!-- Content will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Message Detail Overlay (for mobile screens) -->
                <div id="workerMessageDetailOverlay" class="user-message-detail-overlay" style="display: none;">
                    <div class="overlay-content">
                        <div class="overlay-header">
                            <button class="overlay-close-btn" id="workerOverlayCloseBtn">‚úï</button>
                            <h3>Message Details</h3>
                        </div>
                        <div class="overlay-body">
                            <!-- Content will be populated by JavaScript -->
                        </div>
                        <div class="overlay-footer">
                            <button class="user-detail-reply-btn" id="workerOverlayReplyBtn">Reply</button>
                            <button class="user-detail-close-btn" id="workerOverlayMarkReadBtn">Mark as Read</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Menu Overlay -->
    <div class="messages-menu-overlay" id="messagesMenuOverlay">
        <div class="messages-menu-items">
            <!-- Menu items dynamically generated by shared-menu.js -->
        </div>
    </div>

    <!-- Application Action Overlay -->
    <div class="application-action-overlay" id="applicationActionOverlay" data-application-id="" data-user-id="" data-user-name="" data-job-id="" data-job-title="">
        <div class="application-action-modal">
            <div class="application-action-profile">
                <div class="action-profile-name" id="actionProfileName">
                    User Name
                </div>
                <div class="action-profile-photo">
                    <img src="" alt="" id="actionProfileImage">
                </div>
                <div class="action-profile-rating" id="actionProfileRating">
                    <div class="action-stars">
                        <span class="action-star">‚òÖ</span>
                        <span class="action-star">‚òÖ</span>
                        <span class="action-star">‚òÖ</span>
                        <span class="action-star">‚òÖ</span>
                        <span class="action-star">‚òÖ</span>
                    </div>
                    <div class="action-review-count" id="actionReviewCount">(0)</div>
                </div>
            </div>
            <div class="profile-contact-buttons">
                <button class="profile-btn" id="profileBtn" data-action="view_profile" data-user-id="" data-user-name="">
                    <span>PROFILE</span>
                </button>
                <button class="contact-btn" id="contactBtn" data-action="contact_user" data-user-id="" data-user-name="">
                    <span>CONTACT</span>
                </button>
            </div>
            <div class="action-divider">OR</div>
            <div class="application-action-buttons">
                <button class="hire-job-btn" id="hireJobBtn" data-action="hire" data-application-id="" data-user-id="" data-user-name="" data-job-id="" data-job-title="">
                    <span>HIRE</span>
                </button>
                <button class="reject-job-btn" id="rejectJobBtn" data-action="reject" data-application-id="" data-user-id="" data-user-name="" data-job-id="" data-job-title="">
                    <span>REJECT</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Contact Message Overlay -->
    <div class="contact-message-overlay" id="contactMessageOverlay" data-user-id="" data-user-name="" data-application-id="">
        <div class="contact-message-modal">
            <div class="contact-message-header">
                <div class="contact-user-info">
                    <div class="contact-user-name" id="contactUserName">Contact User</div>
                    <div class="contact-user-subtitle">Send a message</div>
                </div>
                <button class="contact-close-btn" id="contactCloseBtn">√ó</button>
            </div>
            <div class="contact-message-content">
                <textarea 
                    class="contact-message-input" 
                    id="contactMessageInput" 
                    placeholder="Write your message. Suggestion: Ask for a phone number so you may call them directly."
                    maxlength="500"
                    rows="6"
                    data-user-id=""
                    data-user-name=""
                    data-application-id=""
                ></textarea>
                <div class="contact-message-actions">
                    <button class="contact-cancel-btn" id="contactCancelBtn">Cancel</button>
                    <button class="contact-send-btn" id="contactSendBtn" data-action="send_contact_message">Send Message</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Overlay -->
    <div class="confirmation-overlay" id="confirmationOverlay">
        <div class="confirmation-modal">
            <div class="confirmation-icon" id="confirmationIcon">‚úì</div>
            <div class="confirmation-title" id="confirmationTitle">Action Completed</div>
            <div class="confirmation-message" id="confirmationMessage">The action has been completed successfully.</div>
            <button class="confirmation-btn" id="confirmationBtn">OK</button>
        </div>
    </div>

    <!-- UNIFORM HEADER SYSTEM -->
    <script src="public/js/header-uniform.js?v=1.0"></script>
    <script src="public/js/messages.js?v=11.0"></script>

    <!-- Viewport Debug Tool -->
    <div id="vp-debug"></div>
    <script>
        function updateViewportDebug() {
            const vpDebug = document.getElementById('vp-debug');
            if (vpDebug) {
                vpDebug.textContent = `Viewport: ${window.innerWidth}px`;
            }
        }
        
        // Style the debug tool
        const vpDebug = document.getElementById('vp-debug');
        if (vpDebug) {
            vpDebug.style.cssText = `
                position: fixed;
                bottom: 0;
                left: 0;
                background: #000;
                color: #fff;
                padding: 4px 8px;
                font-size: 12px;
                opacity: 0.6;
                z-index: 9999;
                font-family: monospace;
                border-radius: 0 4px 0 0;
                pointer-events: none;
            `;
        }
        
        // Update on load and resize
        updateViewportDebug();
        window.addEventListener('resize', updateViewportDebug);
    </script>

</body>
</html> 
