<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gigs Management - GISUGO</title>
    <!-- UNIFORM HEADER SYSTEM -->
    <link rel="stylesheet" href="public/css/header-uniform.css?v=2.1">
    <link rel="stylesheet" href="public/css/jobs.css?v=2.8">
</head>
<body class="page-jobs">
    <!-- UNIFORM HEADER SYSTEM -->
    <div class="uniform-header">
        <div class="uniform-header-title-container">
            <button class="uniform-header-btn back" aria-label="Back">
                <img src="public/icons/back.png" alt="Back">
                <span>Back</span>
            </button>
            <div class="uniform-header-title"></div>
            <button class="uniform-header-btn menu" id="uniformMenuBtn" aria-label="Menu">
                <img src="public/icons/menu.png" alt="Menu">
                <div>Menu</div>
            </button>
        </div>
        <div class="uniform-header-borderline"></div>
    </div>

    <!-- UNIFORM MENU OVERLAY -->
    <div class="uniform-menu-overlay" id="uniformMenuOverlay">
        <div class="uniform-menu-items">
            <!-- Menu items dynamically generated by shared-menu.js -->
        </div>
    </div>

    <!-- Role Tab Navigation - New Top Level -->
    <div class="role-tabs">
        <button class="role-tab-btn" data-role="worker" id="workerRoleTab">
            <span class="role-tab-text">WORKER</span>
        </button>
        <button class="role-tab-btn active" data-role="customer" id="customerRoleTab">
            <span class="role-tab-text">CUSTOMER</span>
        </button>
    </div>

    <!-- Tab Navigation -->
    <div class="jobs-tabs">
        <button class="tab-btn active" data-tab="listings" id="listingsTab">
            <span class="tab-label">LISTINGS</span>
            <span class="notification-count">4</span>
        </button>
        <button class="tab-btn" data-tab="hiring" id="hiringTab">
            <span class="tab-label">HIRING</span>
            <span class="notification-count">0</span>
        </button>
        <button class="tab-btn" data-tab="previous" id="previousTab">
            <span class="tab-label">COMPLETED</span>
            <span class="notification-count">0</span>
        </button>
    </div>

    <!-- Independent Tab Content Areas -->
    <!-- Listings Tab Content - Independent Scroll Container -->
    <div class="tab-content-wrapper active" id="listings-content">
        <div class="tab-scroll-container">
            <div class="listings-container">
                <!-- Listings content will be loaded dynamically when tab is active -->
            </div>
        </div>
    </div>

    <!-- Hiring Tab Content - Independent Scroll Container -->
    <div class="tab-content-wrapper" id="hiring-content">
        <div class="tab-scroll-container">
            <div class="hiring-container">
                <!-- Hiring content will be loaded dynamically when tab is active -->
            </div>
        </div>
    </div>
            
    <!-- Previous Jobs Tab Content - Independent Scroll Container -->
    <div class="tab-content-wrapper" id="previous-content">
        <div class="tab-scroll-container">
            <div class="previous-container">
                <!-- Previous jobs content will be loaded dynamically when tab is active -->
            </div>
        </div>
    </div>

    <!-- Menu Overlay -->
    <div class="jobs-menu-overlay" id="jobsMenuOverlay">
        <div class="jobs-menu-items">
            <!-- Menu items dynamically generated by shared-menu.js -->
        </div>
    </div>

    <!-- Listing Options Overlay -->
    <div class="listing-options-overlay" id="listingOptionsOverlay">
        <div class="listing-options-container">
            <div class="listing-options-header">
                <div class="listing-options-title" id="listingOptionsTitle">Manage Job</div>
                <div class="listing-options-subtitle" id="listingOptionsSubtitle">Choose an action for this job posting</div>
            </div>
            <div class="listing-options-actions">
                <button class="listing-option-btn view" id="viewJobBtn">
                    VIEW JOB POST
                </button>
                <button class="listing-option-btn modify" id="modifyJobBtn">
                    MODIFY
                </button>
                <button class="listing-option-btn pause" id="pauseJobBtn">
                    PAUSE
                </button>
                <button class="listing-option-btn delete" id="deleteJobBtn">
                    DELETE
                </button>
                                    <button class="listing-option-btn cancel" id="cancelOptionsBtn">
                        CLOSE
                </button>
            </div>
        </div>
    </div>

    <!-- Hiring Options Overlay -->
    <div class="listing-options-overlay" id="hiringOptionsOverlay">
        <div class="listing-options-container">
            <div class="listing-options-header">
                <div class="listing-options-title" id="hiringOptionsTitle">Manage Hiring</div>
                <div class="listing-options-subtitle" id="hiringOptionsSubtitle">Choose an action for this hired job</div>
            </div>
            <div class="listing-options-actions" id="hiringOptionsActions">
                <!-- Dynamic options based on customer/worker role -->
            </div>
        </div>
    </div>

    <!-- Complete Job Confirmation Overlay -->
    <div class="delete-confirmation-overlay" id="completeJobConfirmationOverlay">
        <div class="delete-confirmation-container">
            <div class="delete-confirmation-header">
                <div class="delete-confirmation-icon">✅</div>
                <div class="delete-confirmation-title">Mark Job as Completed</div>
                <div class="delete-confirmation-subtitle" id="completeJobSubtitle">Please confirm that the job has been completed</div>
            </div>
            <div class="delete-confirmation-warning">
                <div class="delete-warning-text">
                    Before marking this job as completed, please verify:<br>
                    • The work has been completed to your satisfaction<br>
                    • You have paid the worker for their services<br>
                    • Any follow-up arrangements have been made
                </div>
            </div>
            <div class="delete-confirmation-actions">
                <button class="delete-confirmation-btn cancel" id="completeJobNoBtn">
                    NO, NOT YET
                </button>
                <button class="delete-confirmation-btn delete" id="completeJobYesBtn">
                    YES, COMPLETED
                </button>
            </div>
        </div>
    </div>

    <!-- Relist Job Confirmation Overlay -->
    <div class="delete-confirmation-overlay" id="relistJobConfirmationOverlay">
        <div class="delete-confirmation-container">
            <div class="delete-confirmation-header">
                <div class="delete-confirmation-title-row">
                    <div class="delete-confirmation-icon">🔄</div>
                    <div class="delete-confirmation-title">Relist Job</div>
                </div>
                <div class="delete-confirmation-subtitle" id="relistJobSubtitle">This will void the contract</div>
            </div>
            <div class="delete-confirmation-warning">
                <div class="delete-warning-text">
                    WARNING: Relisting this job will:<br>
                    • Void the current contract with <span id="relistWorkerName">the worker</span><br>
                    • Remove them from this job<br>
                    • Make the job available for new applications<br>
                    • Move it back to your active listings<br><br>
                    Please make sure you have notified <span id="relistWorkerNameReminder">the worker</span> that you are removing them from this job before proceeding.
                </div>
            </div>
            <div class="reason-input-section">
                <label for="relistReasonInput" class="reason-label">
                    For records, please provide reason why you are firing <span id="relistWorkerNameInput">the worker</span>:
                </label>
                <textarea 
                    id="relistReasonInput" 
                    class="reason-textarea" 
                    placeholder="Enter reason for termination (minimum 2 characters)"
                    maxlength="200"
                    rows="2"></textarea>
                <div class="reason-char-count">
                    <span id="relistCharCount">0</span>/200 characters
                </div>
                <div class="reason-error" id="relistReasonError">Please enter at least 2 characters</div>
            </div>
            <div class="delete-confirmation-actions">
                <button class="delete-confirmation-btn cancel" id="relistJobNoBtn">
                    NO, KEEP CONTRACT
                </button>
                <button class="delete-confirmation-btn delete" id="relistJobYesBtn" disabled>
                    YES, VOID & RELIST
                </button>
            </div>
        </div>
    </div>

    <!-- Resign Job Confirmation Overlay -->
    <div class="delete-confirmation-overlay" id="resignJobConfirmationOverlay">
        <div class="delete-confirmation-container">
            <div class="delete-confirmation-header">
                <div class="delete-confirmation-title-row">
                    <div class="delete-confirmation-icon">👋</div>
                    <div class="delete-confirmation-title">Resign from Job</div>
                </div>
                <div class="delete-confirmation-subtitle" id="resignJobSubtitle">This will void your contract</div>
            </div>
            <div class="delete-confirmation-warning">
                <div class="delete-warning-text">
                    WARNING: Resigning from this job will:<br>
                    • Void your contract with <span id="resignCustomerName">the customer</span><br>
                    • Remove you from this job<br>
                    • Make the job available for new applications<br><br>
                    Please ensure you have contacted the customer about quitting before proceeding.
                </div>
            </div>
            <div class="reason-input-section">
                <label for="resignReasonInput" class="reason-label">
                    For records, please provide reason why you are quitting before the job is complete:
                </label>
                <textarea 
                    id="resignReasonInput" 
                    class="reason-textarea" 
                    placeholder="Enter reason for resignation (minimum 2 characters)"
                    maxlength="200"
                    rows="2"></textarea>
                <div class="reason-char-count">
                    <span id="resignCharCount">0</span>/200 characters
                </div>
                <div class="reason-error" id="resignReasonError">Please enter at least 2 characters</div>
            </div>
            <div class="delete-confirmation-actions">
                <button class="delete-confirmation-btn cancel" id="resignJobNoBtn">
                    NO, CONTINUE WORKING
                </button>
                <button class="delete-confirmation-btn delete" id="resignJobYesBtn" disabled>
                    YES, RESIGN
                </button>
            </div>
        </div>
    </div>

    <!-- Success Overlays -->
    <div class="success-overlay" id="jobCompletedSuccessOverlay">
        <div class="success-modal">
            <!-- Confetti Animation -->
            <div class="confetti-container">
                <div class="confetti-piece confetti-1"></div>
                <div class="confetti-piece confetti-2"></div>
                <div class="confetti-piece confetti-3"></div>
                <div class="confetti-piece confetti-4"></div>
                <div class="confetti-piece confetti-5"></div>
                <div class="confetti-piece confetti-6"></div>
                <div class="confetti-piece confetti-7"></div>
                <div class="confetti-piece confetti-8"></div>
                <div class="confetti-piece confetti-9"></div>
                <div class="confetti-piece confetti-10"></div>
                <div class="confetti-piece confetti-11"></div>
                <div class="confetti-piece confetti-12"></div>
            </div>
            
            <div class="success-header">
                <div class="success-title-row">
                    <div class="success-title">Congratulations!</div>
                    <div class="success-icon">🎉</div>
                </div>
                <div class="success-subtitle" id="jobCompletedMessage">The job has been marked as completed successfully!</div>
            </div>
            
            <div class="success-feedback-section">
                <div class="feedback-label">Please rate your experience and leave feedback for <span id="completedWorkerName">the worker</span>:</div>
                
                <div class="feedback-rating-section">
                    <label class="feedback-rating-label">Rating:</label>
                    <div class="feedback-stars-container">
                        <div class="feedback-star" data-rating="1">★</div>
                        <div class="feedback-star" data-rating="2">★</div>
                        <div class="feedback-star" data-rating="3">★</div>
                        <div class="feedback-star" data-rating="4">★</div>
                        <div class="feedback-star" data-rating="5">★</div>
                    </div>
                </div>
                
                <div class="feedback-text-section">
                    <label for="completionFeedback" class="feedback-text-label">Feedback (required):</label>
                    <textarea 
                        id="completionFeedback" 
                        class="feedback-textarea" 
                        placeholder="Share your experience working with this person..."
                        maxlength="300"
                        rows="3"></textarea>
                    <div class="feedback-char-count">
                        <span id="feedbackCharCount">0</span>/300 characters
                    </div>
                </div>
            </div>
            
            <div class="success-actions">
                <button class="success-btn" id="jobCompletedOkBtn">SUBMIT</button>
            </div>
        </div>
    </div>

    <div class="success-overlay" id="contractVoidedSuccessOverlay">
        <div class="success-modal">
            <div class="success-icon">✅</div>
            <div class="success-title">Contract Voided</div>
            <div class="success-message" id="contractVoidedMessage">The contract has been voided and the job is now available for new applications.</div>
            <button class="success-btn" id="contractVoidedOkBtn">OK</button>
        </div>
    </div>

    <div class="success-overlay" id="resignationConfirmedOverlay">
        <div class="success-modal resignation-modal">
            <!-- Rain/Tear Animation for Disappointment -->
            <div class="rain-container">
                <div class="rain-drop rain-1"></div>
                <div class="rain-drop rain-2"></div>
                <div class="rain-drop rain-3"></div>
                <div class="rain-drop rain-4"></div>
                <div class="rain-drop rain-5"></div>
                <div class="rain-drop rain-6"></div>
                <div class="rain-drop rain-7"></div>
                <div class="rain-drop rain-8"></div>
                <div class="rain-drop rain-9"></div>
                <div class="rain-drop rain-10"></div>
            </div>
            <div class="success-icon">😞</div>
            <div class="success-title resignation-title">Job Resignation</div>
            <div class="success-message" id="resignationMessage">You have resigned from the job.</div>
            <button class="success-btn resignation-btn" id="resignationOkBtn">UNDERSTOOD</button>
        </div>
    </div>

    <div class="success-overlay" id="contractVoidedNegativeOverlay">
        <div class="success-modal resignation-modal">
            <!-- Rain/Tear Animation for Contract Voiding -->
            <div class="rain-container">
                <div class="rain-drop rain-1"></div>
                <div class="rain-drop rain-2"></div>
                <div class="rain-drop rain-3"></div>
                <div class="rain-drop rain-4"></div>
                <div class="rain-drop rain-5"></div>
                <div class="rain-drop rain-6"></div>
                <div class="rain-drop rain-7"></div>
                <div class="rain-drop rain-8"></div>
                <div class="rain-drop rain-9"></div>
                <div class="rain-drop rain-10"></div>
            </div>
            <div class="success-icon">😔</div>
            <div class="success-title resignation-title">Contract Voided</div>
            <div class="success-message" id="contractVoidedNegativeMessage">The contract has been voided.</div>
            <button class="success-btn resignation-btn" id="contractVoidedNegativeOkBtn">UNDERSTOOD</button>
        </div>
    </div>

    <!-- Delete Confirmation Overlay -->
    <div class="delete-confirmation-overlay" id="deleteConfirmationOverlay">
        <div class="delete-confirmation-container">
            <div class="delete-confirmation-header">
                <div class="delete-confirmation-icon">⚠️</div>
                <div class="delete-confirmation-title">Delete Job Posting</div>
                <div class="delete-confirmation-subtitle" id="deleteConfirmationSubtitle">Are you sure you want to permanently delete this job?</div>
            </div>
            <div class="delete-confirmation-warning">
                <div class="delete-warning-text">
                    This action cannot be undone. The job posting and all related applications will be permanently removed.
                </div>
                <div class="delete-application-count" id="deleteApplicationCount">
                    <!-- Application count warning will be inserted here -->
                </div>
            </div>
            <div class="delete-confirmation-actions">
                <button class="delete-confirmation-btn cancel" id="deleteConfirmCancelBtn">
                    CANCEL
                </button>
                <button class="delete-confirmation-btn delete" id="deleteConfirmDeleteBtn">
                    DELETE PERMANENTLY
                </button>
            </div>
        </div>
    </div>

    <!-- Previous Jobs Options Overlay -->
    <div class="listing-options-overlay" id="previousOptionsOverlay">
        <div class="listing-options-container">
            <div class="listing-options-header">
                <div class="listing-options-title" id="previousOptionsTitle">Completed Job Options</div>
                <div class="listing-options-subtitle" id="previousOptionsSubtitle">Choose an action for this completed job</div>
            </div>
            <div class="listing-options-actions" id="previousOptionsActions">
                <!-- Dynamic options based on customer/worker role -->
            </div>
        </div>
    </div>

    <!-- Leave Feedback Overlay -->
    <div class="success-overlay" id="leaveFeedbackOverlay">
        <div class="success-modal">
            <div class="success-header">
                <div class="success-title-row">
                    <div class="success-title">Leave Feedback</div>
                    <div class="success-icon">💭</div>
                </div>
                <div class="success-subtitle" id="feedbackCustomerName">Rate your experience working for the customer</div>
            </div>
            
            <div class="success-feedback-section">
                <div class="feedback-label">How was your experience with <span id="feedbackCustomerNameSpan">the customer</span>?</div>
                
                <div class="feedback-rating-section">
                    <label class="feedback-rating-label">Rating:</label>
                    <div class="feedback-stars-container" id="customerFeedbackStars">
                        <div class="feedback-star" data-rating="1">★</div>
                        <div class="feedback-star" data-rating="2">★</div>
                        <div class="feedback-star" data-rating="3">★</div>
                        <div class="feedback-star" data-rating="4">★</div>
                        <div class="feedback-star" data-rating="5">★</div>
                    </div>
                </div>
                
                <div class="feedback-text-section">
                    <label for="customerFeedback" class="feedback-text-label">Feedback (optional):</label>
                    <textarea 
                        id="customerFeedback" 
                        class="feedback-textarea" 
                        placeholder="Share your experience working for this customer..."
                        maxlength="300"
                        rows="3"></textarea>
                    <div class="feedback-char-count">
                        <span id="customerFeedbackCharCount">0</span>/300 characters
                    </div>
                </div>
            </div>
            
            <div class="success-actions">
                <button class="success-btn" id="submitCustomerFeedbackBtn">SUBMIT FEEDBACK</button>
                <button class="success-btn" id="cancelCustomerFeedbackBtn" style="background: #6b7280; margin-left: 10px;">CANCEL</button>
            </div>
        </div>
    </div>

    <!-- Report Dispute Overlay -->
    <div class="delete-confirmation-overlay" id="reportDisputeOverlay">
        <div class="delete-confirmation-container">
            <div class="delete-confirmation-header">
                <div class="delete-confirmation-title-row">
                    <div class="delete-confirmation-icon">⚠️</div>
                    <div class="delete-confirmation-title">Report Dispute</div>
                </div>
                <div class="delete-confirmation-subtitle" id="disputeJobSubtitle">Report an issue with this completed job</div>
            </div>
            <div class="delete-confirmation-warning">
                <div class="delete-warning-text">
                    Please describe the issue you experienced with <span id="disputeCustomerName">the customer</span>. This will be reviewed by our support team.
                </div>
            </div>
            <div class="reason-input-section">
                <label for="disputeReasonInput" class="reason-label">
                    Describe the issue or dispute (required):
                </label>
                <textarea 
                    id="disputeReasonInput" 
                    class="reason-textarea" 
                    placeholder="Describe what went wrong with this job (minimum 10 characters)"
                    maxlength="500"
                    rows="4"></textarea>
                <div class="reason-char-count">
                    <span id="disputeCharCount">0</span>/500 characters
                </div>
                <div class="reason-error" id="disputeReasonError">Please enter at least 10 characters</div>
            </div>
            <div class="delete-confirmation-actions">
                <button class="delete-confirmation-btn cancel" id="disputeCancelBtn">
                    CANCEL
                </button>
                <button class="delete-confirmation-btn delete" id="submitDisputeBtn" disabled>
                    SUBMIT REPORT
                </button>
            </div>
        </div>
    </div>

    <!-- Feedback Submitted Success Overlay -->
    <div class="success-overlay" id="feedbackSubmittedOverlay">
        <div class="success-modal">
            <div class="success-icon">✅</div>
            <div class="success-title">Feedback Submitted</div>
            <div class="success-message" id="feedbackSubmittedMessage">Thank you! Your feedback has been submitted successfully.</div>
            <button class="success-btn" id="feedbackSubmittedOkBtn">OK</button>
        </div>
    </div>

    <!-- Dispute Submitted Success Overlay -->
    <div class="success-overlay" id="disputeSubmittedOverlay">
        <div class="success-modal">
            <div class="success-icon">📋</div>
            <div class="success-title">Dispute Reported</div>
            <div class="success-message" id="disputeSubmittedMessage">Your dispute has been submitted and will be reviewed by our support team within 24-48 hours.</div>
            <button class="success-btn" id="disputeSubmittedOkBtn">UNDERSTOOD</button>
        </div>
    </div>

    <script src="public/js/shared-menu.js"></script>
    <script src="public/js/jobs.js?v=15"></script>

    <!-- UNIFORM HEADER SYSTEM -->
    <script src="public/js/header-uniform.js?v=1.0"></script>
    <script src="public/js/shared-menu.js"></script>
    <script src="public/js/jobs.js?v=2.9"></script>
</body>
</html> 
